@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  /* Smooth theme transitions */
  html {
    transition: background-color 300ms ease-in-out, color 300ms ease-in-out;
  }

  body {
    @apply antialiased text-gray-900 dark:text-gray-100;
    background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
    background-attachment: fixed;
  }

  .dark body {
    background: linear-gradient(180deg, #111827 0%, #0f172a 100%);
  }

  /* Typography Scale */
  h1 {
    @apply text-3xl lg:text-4xl font-bold text-gray-900 dark:text-gray-100 mb-4 tracking-tight;
  }

  h2 {
    @apply text-2xl lg:text-3xl font-semibold text-gray-800 dark:text-gray-200 mb-3 tracking-tight;
  }

  h3 {
    @apply text-xl lg:text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-2 tracking-tight;
  }

  h4 {
    @apply text-lg lg:text-xl font-medium text-gray-700 dark:text-gray-300 mb-2;
  }

  /* Body text improvements */
  p {
    @apply leading-relaxed;
  }

  /* Number display (for stats) */
  .text-numeric {
    font-variant-numeric: tabular-nums;
    font-feature-settings: 'tnum';
  }

  /* Display text for hero sections */
  .text-display {
    @apply text-4xl lg:text-5xl xl:text-display font-extrabold tracking-tighter;
  }

  /* Overline text for labels */
  .text-overline {
    @apply text-xs uppercase tracking-wider font-semibold;
  }
}

@layer components {
  /* Existing components */
  .table-cell-numeric {
    @apply text-right tabular-nums;
  }

  .progression-badge {
    @apply inline-block rounded px-2 py-1 text-sm font-medium;
  }

  .progression-positive {
    @apply text-victory;
  }

  .progression-negative {
    @apply text-defeat;
  }

  /* New utility components */
  .page-section {
    @apply mb-6;
  }

  .card {
    @apply bg-white dark:bg-gray-800 rounded-card shadow-card p-4;
  }

  .card-header {
    @apply mb-4 pb-4 border-b border-gray-200 dark:border-gray-700;
  }

  /* Enhanced Card Styles */
  .card-elevated {
    @apply rounded-card bg-white dark:bg-gray-800;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.08),
                0 2px 4px -1px rgba(0, 0, 0, 0.04);
    border: 1px solid rgba(0, 0, 0, 0.05);
    transition: all 200ms ease-out;
  }

  .dark .card-elevated {
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.3),
                0 2px 4px -1px rgba(0, 0, 0, 0.2);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  .card-elevated:hover {
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1),
                0 4px 6px -2px rgba(0, 0, 0, 0.05);
    transform: translateY(-2px);
  }

  .dark .card-elevated:hover {
    box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.4),
                0 4px 6px -2px rgba(0, 0, 0, 0.3);
  }

  .card-elevated:active {
    transform: translateY(0px);
  }

  /* Gradient card backgrounds */
  .card-gradient {
    background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
  }

  .dark .card-gradient {
    background: linear-gradient(145deg, #1f2937 0%, #111827 100%);
  }

  /* Featured card with accent border */
  .card-featured {
    @apply rounded-card bg-white dark:bg-gray-800;
    border: 2px solid theme('colors.primary.500');
    box-shadow: 0 4px 6px -1px rgba(0, 102, 204, 0.1),
                0 2px 4px -1px rgba(0, 102, 204, 0.06);
    transition: all 200ms ease-out;
  }

  .card-featured:hover {
    box-shadow: 0 10px 15px -3px rgba(0, 102, 204, 0.15),
                0 4px 6px -2px rgba(0, 102, 204, 0.1);
    transform: translateY(-2px);
  }

  /* Glassmorphism effect */
  .card-glass {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.08);
    @apply rounded-card;
  }

  .dark .card-glass {
    background: rgba(31, 41, 55, 0.9);
    border: 1px solid rgba(255, 255, 255, 0.1);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
  }

  /* Inner glow for depth */
  .card-glow {
    box-shadow: inset 0 1px 0 0 rgba(255, 255, 255, 0.6),
                0 4px 6px -1px rgba(0, 0, 0, 0.08);
  }

  /* Focus styles */
  button:focus-visible,
  a:focus-visible,
  input:focus-visible,
  select:focus-visible {
    @apply outline-none ring-2 ring-primary ring-offset-2;
  }

  /* Smooth transitions */
  a,
  button {
    @apply transition-colors duration-200;
  }

  /* ===== Micro-interactions ===== */

  /* Button Interactions */
  .btn-primary {
    @apply px-4 py-2 rounded-lg bg-primary text-white font-medium;
    transition: all 150ms ease-out;
  }

  .btn-primary:hover {
    @apply bg-primary-600;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 102, 204, 0.2);
  }

  .btn-primary:active {
    transform: translateY(0px);
    box-shadow: 0 2px 4px rgba(0, 102, 204, 0.2);
  }

  .btn-secondary {
    @apply px-4 py-2 rounded-lg bg-gray-200 text-gray-900 font-medium;
    transition: all 150ms ease-out;
  }

  .btn-secondary:hover {
    @apply bg-gray-300;
    transform: translateY(-1px);
  }

  .btn-secondary:active {
    transform: translateY(0px);
  }

  .btn-ghost {
    @apply px-4 py-2 rounded-lg text-gray-700 font-medium;
    transition: all 150ms ease-out;
  }

  .btn-ghost:hover {
    @apply bg-gray-100;
  }

  .btn-ghost:active {
    @apply bg-gray-200;
  }

  /* ===== Touch Interactions ===== */

  /* Touch target minimum size (WCAG 2.5.5 - Level AAA: 44x44px) */
  .touch-target {
    min-height: 44px;
    min-width: 44px;
  }

  @media (min-width: 768px) {
    .touch-target {
      min-height: auto;
      min-width: auto;
    }
  }

  /* Touch feedback for mobile */
  @media (max-width: 767px) {
    button:active,
    a:active {
      opacity: 0.7;
      transition: opacity 100ms ease-out;
    }
  }

  /* Safe tap area spacing */
  .tap-spacing {
    @apply gap-3;
  }

  @media (min-width: 768px) {
    .tap-spacing {
      @apply gap-2;
    }
  }

  /* Enhanced Input Focus Animations */
  input:focus,
  textarea:focus,
  select:focus {
    transition: all 200ms ease-out;
    transform: scale(1.01);
  }

  input,
  textarea,
  select {
    transition: all 200ms ease-out;
  }

  /* Ripple Effect Container */
  .ripple-container {
    position: relative;
    overflow: hidden;
  }

  .ripple-effect {
    position: absolute;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.6);
    transform: scale(0);
    animation: ripple 600ms ease-out;
    pointer-events: none;
  }

  /* Interactive Element Hover States */
  .interactive-lift {
    transition: transform 150ms ease-out;
  }

  .interactive-lift:hover {
    transform: translateY(-2px);
  }

  .interactive-lift:active {
    transform: translateY(0px);
  }

  /* Icon Button Animation */
  .icon-btn {
    @apply p-2 rounded-lg transition-all duration-150;
  }

  .icon-btn:hover {
    @apply bg-gray-100;
    transform: scale(1.1);
  }

  .icon-btn:active {
    transform: scale(0.95);
  }

  /* Gradient Backgrounds */
  .bg-gradient-primary {
    background: linear-gradient(135deg, #0066cc 0%, #0052a3 100%);
  }

  .bg-gradient-card {
    background: linear-gradient(145deg, #ffffff 0%, #f8fafc 100%);
  }

  .bg-gradient-page {
    background: linear-gradient(180deg, #f8fafc 0%, #f1f5f9 100%);
  }

  /* Gradient Text */
  .text-gradient-primary {
    background: linear-gradient(135deg, #0066cc 0%, #0052a3 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Hover Glow Effects */
  .hover-glow-primary {
    transition: box-shadow 200ms ease-out;
  }

  .hover-glow-primary:hover {
    box-shadow: 0 0 20px rgba(0, 102, 204, 0.3);
  }

  /* ===== Icon Utilities ===== */

  /* Icon Sizing */
  .icon-xs {
    @apply w-3 h-3;
  }

  .icon-sm {
    @apply w-4 h-4;
  }

  .icon-base {
    @apply w-5 h-5;
  }

  .icon-lg {
    @apply w-6 h-6;
  }

  .icon-xl {
    @apply w-8 h-8;
  }

  .icon-2xl {
    @apply w-10 h-10;
  }

  /* Icon Colors */
  .icon-primary {
    @apply text-primary-500;
  }

  .icon-success {
    @apply text-victory;
  }

  .icon-danger {
    @apply text-defeat;
  }

  .icon-warning {
    @apply text-orange-500;
  }

  .icon-muted {
    @apply text-gray-400;
  }

  /* Icon Animations */
  .icon-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .icon-spin {
    animation: spin 1s linear infinite;
  }

  .icon-bounce {
    animation: bounce-subtle 1s ease-in-out infinite;
  }
}

@layer utilities {
  /* Animation keyframes */
  @keyframes shimmer {
    0% {
      background-position: -1000px 0;
    }
    100% {
      background-position: 1000px 0;
    }
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }

  @keyframes slideInFromRight {
    from {
      transform: translateX(100%);
      opacity: 0;
    }
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  @keyframes spin {
    from {
      transform: rotate(0deg);
    }
    to {
      transform: rotate(360deg);
    }
  }

  @keyframes ripple {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }

  @keyframes pulse {
    0%, 100% {
      opacity: 1;
    }
    50% {
      opacity: 0.5;
    }
  }

  @keyframes bounce-subtle {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-4px);
    }
  }

  @keyframes loading-bar {
    0% {
      transform: translateX(-100%);
    }
    50% {
      transform: translateX(250%);
    }
    100% {
      transform: translateX(600%);
    }
  }

  /* Animation classes */
  .animate-shimmer {
    animation: shimmer 2s infinite linear;
    background: linear-gradient(
      to right,
      #f3f4f6 0%,
      #e5e7eb 20%,
      #f3f4f6 40%,
      #f3f4f6 100%
    );
    background-size: 1000px 100%;
  }

  .animate-fadeIn {
    animation: fadeIn 400ms ease-in-out;
  }

  .animate-slideIn {
    animation: slideInFromRight 300ms ease-out;
  }

  .animate-spin-slow {
    animation: spin 2s linear infinite;
  }

  .animate-pulse {
    animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
  }

  .animate-bounce-subtle {
    animation: bounce-subtle 1s ease-in-out infinite;
  }

  /* Loading Spinner */
  .loading-spinner {
    @apply inline-block w-5 h-5 border-2 border-gray-300 border-t-primary rounded-full;
    animation: spin 1s linear infinite;
  }

  .loading-dots {
    display: inline-flex;
    gap: 4px;
  }

  .loading-dots span {
    @apply w-2 h-2 bg-gray-400 rounded-full;
    animation: pulse 1.4s ease-in-out infinite;
  }

  .loading-dots span:nth-child(1) {
    animation-delay: 0s;
  }

  .loading-dots span:nth-child(2) {
    animation-delay: 0.2s;
  }

  .loading-dots span:nth-child(3) {
    animation-delay: 0.4s;
  }
}
